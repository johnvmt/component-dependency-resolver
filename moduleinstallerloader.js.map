{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Graph.js","src/ModuleLoader.js","src/ModuleManager.js","src/Utils.js"],"names":["Graph","this","_nodes","prototype","getNode","key","hasNode","data","Error","addNode","indegree","edges","addEdge","sourceNodeKey","sinkNodeKey","sourceNodeEdges","indexOf","push","hasCycle","pop","depthFirstTraverse","arguments","length","callback","visitedNodes","nodeKey","hasOwnProperty","console","log","index","visited","sourceNode","Array","isArray","visitedClone","slice","module","exports","ModuleLoader","config","Utils","require","load","loadModule","moduleConfig","moduleKey","dependentModules","required","objectForEach","dependencyModuleKey","dependencyInternalKey","parsedArgs","modulesLoaded","moduleFunction","function","argument","parseArgs","name","level","validate","arg","allArgs","default","dependencyGraph","_dependencyGraph","modulesConfig","ModuleManager","moduleLoader","_modulesLoaded","installModules","moduleInstaller","installsInProgress","installStatus","npm","installNpmModule","error","installMetadata","install","loadModules","core","installLoadModules","errors","moduleInstallStatus","object","property","argsPassed","argsConfig","validArg","argConfig","requiredLeftEnough","minIndex","matched","argConfigMin","call","forEach","ctr"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","function Graph() {\n\tthis._nodes = {};\n}\n\nGraph.prototype.getNode = function(key) {\n\tif(!this.hasNode(key))\n\t\tthrow new Error('node_undefined');\n\telse\n\t\treturn this._nodes[key].data;\n};\n\nGraph.prototype.addNode = function(key, data) {\n\tif(this.hasNode(key))\n\t\tthrow new Error('node_exists');\n\telse\n\t\tthis._nodes[key] = {data: data, indegree: 0, edges: []};\n};\n\nGraph.prototype.hasNode = function(key) {\n\treturn (typeof this._nodes[key] != 'undefined');\n};\n\nGraph.prototype.addEdge = function(sourceNodeKey, sinkNodeKey) {\n\tif(!this.hasNode(sourceNodeKey))\n\t\tthrow new Error('source_node_undefined');\n\telse if(!this.hasNode(sinkNodeKey))\n\t\tthrow new Error('sink_node_undefined');\n\telse {\n\t\tvar sourceNodeEdges = this._nodes[sourceNodeKey].edges;\n\t\tif(sourceNodeEdges.indexOf(sinkNodeKey) < 0) {\n\t\t\tsourceNodeEdges.push(sinkNodeKey);\n\t\t\tif(this.hasCycle(sinkNodeKey)) {\n\t\t\t\tsourceNodeEdges.pop();\n\t\t\t\tthrow new Error('graph_cycle');\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis._nodes[sinkNodeKey].indegree++;\n\t\t}\n\t}\n};\n\nGraph.prototype.depthFirstTraverse = function() {\n\tif(arguments.length == 1)\n\t\tvar callback = arguments[0];\n\telse if(arguments.length == 2) {\n\t\tvar sourceNodeKey = arguments[0];\n\t\tvar callback = arguments[1];\n\t}\n\telse if(arguments.length == 3) {\n\t\tvar sourceNodeKey = arguments[0];\n\t\tvar visitedNodes = arguments[1];\n\t\tvar callback = arguments[2];\n\t}\n\telse\n\t\tthrow new Error('invalid_arguments');\n\n\tif(typeof visitedNodes == 'undefined')\n\t\tvar visitedNodes = {};\n\n\tif(typeof sourceNodeKey == 'undefined') {\n\t\t// Start with nodes with indegree 0\n\t\tfor(var nodeKey in this._nodes) {\n\t\t\tif (this._nodes.hasOwnProperty(nodeKey) && this._nodes[nodeKey].indegree == 0)\n\t\t\t\tthis.depthFirstTraverse(nodeKey, visitedNodes, callback);\n\t\t}\n\t}\n\telse if(typeof this._nodes[sourceNodeKey] == 'object') {\n\t\tif(typeof visitedNodes[sourceNodeKey] != 'boolean' || !visitedNodes[sourceNodeKey]) {\n\t\t\tvisitedNodes[sourceNodeKey] = true;\n\t\t\tfor(var index in this._nodes[sourceNodeKey].edges) {\n\t\t\t\tthis.depthFirstTraverse(this._nodes[sourceNodeKey].edges[index], visitedNodes, callback);\n\t\t\t}\n\t\t\tcallback(this._nodes[sourceNodeKey].data, sourceNodeKey);\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(sourceNodeKey);\n\t\tthrow new Error('undefined_node');\n\t}\n};\n\nGraph.prototype.hasCycle = function(sourceNodeKey, visited) {\n\tif(!this.hasNode(sourceNodeKey))\n\t\tthrow new Error('source_node_undefined');\n\telse {\n\t\tvar sourceNode = this._nodes[sourceNodeKey];\n\n\t\tif(typeof visited == 'undefined' || !Array.isArray(visited))\n\t\t\tvisited = [];\n\n\t\tif(visited.indexOf(sourceNodeKey) >= 0)\n\t\t\treturn true;\n\n\t\tvisited.push(sourceNodeKey);\n\n\t\tfor(var index in sourceNode.edges) {\n\t\t\tvar visitedClone = visited.slice(0);\n\t\t\tif(this.hasCycle(sourceNode.edges[index], visitedClone))\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n};\n\nmodule.exports = function() {\n\treturn new Graph();\n};","var Utils = require('./Utils');\nvar Graph = require('./Graph');\n\nfunction ModuleLoader(config) {\n\tthis.config = config;\n\n}\n\n/**\n *\n * @param [moduleKey]\n * @param modulesConfig\n * @param [modulesLoaded]\n */\nModuleLoader.prototype.load = function() {\n\tvar parsedArgs = Utils.parseArgs(\n\t\targuments,\n\t\t[\n\t\t\t{name: 'moduleKey', level: 1,  validate: function(arg, allArgs) { return typeof arg == 'string'; }},\n\t\t\t{name: 'modulesConfig', level: 0,  validate: function(arg, allArgs) { return typeof arg == 'object'; }},\n\t\t\t{name: 'modulesLoaded', level: 1,  validate: function(arg, allArgs) { return typeof arg == 'object' && arg != null; }, default: {}}\n\t\t]\n\t);\n\n\tvar dependencyGraph = this._dependencyGraph(parsedArgs.modulesConfig);\n\n\tif(typeof parsedArgs.moduleKey == 'string')\n\t\tdependencyGraph.depthFirstTraverse(parsedArgs.moduleKey, loadModule);\n\telse\n\t\tdependencyGraph.depthFirstTraverse(loadModule);\n\n\treturn parsedArgs.modulesLoaded;\n\n\tfunction loadModule(moduleConfig, moduleKey) {\n\t\t// Get all modules to be passed to module\n\t\tvar dependentModules = {};\n\t\tif(typeof moduleConfig.required == 'object' && moduleConfig.required != null) { // Iterate over module dependencies\n\t\t\tUtils.objectForEach(moduleConfig.required, function(dependencyModuleKey, dependencyInternalKey) {\n\t\t\t\tdependentModules[dependencyInternalKey] = parsedArgs.modulesLoaded[dependencyModuleKey];\n\t\t\t});\n\t\t}\n\n\t\tvar moduleFunction = typeof moduleConfig.function == 'function' ? moduleConfig.function : require(moduleConfig.require);\n\n\t\t// TODO add try/catch\n\t\tparsedArgs.modulesLoaded[moduleKey] = moduleFunction(moduleConfig.argument, dependentModules);\n\t}\n};\n\nModuleLoader.prototype._dependencyGraph = function(modulesConfig) {\n\tvar dependencyGraph = Graph();\n\n\tUtils.objectForEach(modulesConfig, function(moduleConfig, moduleKey) {// Iterate over modules in config\n\t\tdependencyGraph.addNode(moduleKey, moduleConfig); // Add each module to graph\n\t});\n\n\tUtils.objectForEach(modulesConfig, function(moduleConfig, moduleKey) {// Iterate over modules in config\n\t\tif(typeof moduleConfig.required == 'object' && moduleConfig.required != null) { // Iterate over module dependencies\n\t\t\tUtils.objectForEach(moduleConfig.required, function (dependencyModuleKey) {\n\t\t\t\tdependencyGraph.addEdge(moduleKey, dependencyModuleKey); // Add each module to graph\n\t\t\t});\n\t\t}\n\t});\n\n\treturn dependencyGraph;\n};\n\nmodule.exports = function(config) {\n\treturn new ModuleLoader(config);\n};","var Utils = require('./Utils');\n\nfunction ModuleManager(config) {\n\tthis.moduleLoader = require('./ModuleLoader')();\n\tthis._modulesLoaded = {};\n}\n\nModuleManager.prototype.installModules = function(modulesConfig, callback) {\n\tif(typeof this.moduleInstaller == 'undefined')\n\t\tthis.moduleInstaller = require('./ModuleInstaller')();\n\tvar moduleInstaller = this.moduleInstaller;\n\tvar installsInProgress = 0;\n\tvar installStatus = {};\n\tUtils.objectForEach(modulesConfig, function(moduleConfig, moduleKey) {\n\t\tif(typeof moduleConfig.npm != 'undefined' && typeof moduleConfig.require != 'string') {\n\t\t\tinstallsInProgress++;\n\t\t\tmoduleInstaller.installNpmModule(moduleConfig.npm, function(error, installMetadata) {\n\t\t\t\tinstallsInProgress--;\n\t\t\t\tinstallStatus[moduleKey] = {error: error, install: installMetadata};\n\t\t\t\tif(!error)\n\t\t\t\t\tmoduleConfig.require = installMetadata.name; // TODO move me\n\t\t\t\tif(installsInProgress == 0)\n\t\t\t\t\tcallback(installStatus);\n\t\t\t});\n\t\t}\n\t});\n\tif(installsInProgress == 0)\n\t\tcallback(installStatus);\n};\n\nModuleManager.prototype.loadModules = function(modulesConfig, callback) {\n\tvar core = this;\n\ttry {\n\t\tthis.moduleLoader.load(modulesConfig, core._modulesLoaded);\n\t\tcallback(null, core._modulesLoaded);\n\t}\n\tcatch(error) {\n\t\tcallback(error, core._modulesLoaded);\n\t}\n};\n\nModuleManager.prototype.installLoadModules = function(modulesConfig, callback) {\n\t// check cache\n\tvar core = this;\n\tcore.installModules(modulesConfig, function(installStatus) {\n\t\tvar errors = false;\n\t\tUtils.objectForEach(installStatus, function(moduleInstallStatus) {\n\t\t\tif(moduleInstallStatus.error != null)\n\t\t\t\terrors = true;\n\t\t});\n\n\n\t\tif(errors)\n\t\t\tcallback(installStatus, null);\n\t\telse\n\t\t\tcore.loadModules(modulesConfig, callback);\n\t});\n};\n\nmodule.exports = function(config) {\n\treturn new ModuleManager(config);\n};","// Utils module 1.0.10 MINI\nvar Utils = {};\n\nUtils.objectForEach = function(object, callback) {\n\t// run function on each property (child) of object\n\tvar property;\n\tfor(property in object) { // pull keys before looping through?\n\t\tif (object.hasOwnProperty(property))\n\t\t\tcallback(object[property], property, object);\n\t}\n};\n\nUtils.parseArgs = function(argsPassed, argsConfig) {\n\tvar matched = {};\n\n\tfunction toLevels(argsConfig, level) {\n\t\tif(typeof level !== 'number')\n\t\t\tlevel = 0;\n\n\t\tvar levelsArr = [];\n\n\t\targsConfig.forEach(function(argConfig) {\n\t\t\tif(Array.isArray(argConfig))\n\t\t\t\tlevelsArr = levelsArr.concat(toLevels(argConfig, level + 1));\n\t\t\telse {\n\t\t\t\targConfig.level = level;\n\t\t\t\tlevelsArr.push(argConfig);\n\t\t\t}\n\t\t});\n\n\t\treturn levelsArr;\n\t}\n\n\tfunction validArg(argConfig, arg) {\n\t\treturn typeof argConfig.validate != 'function' || argConfig.validate(arg)\n\t}\n\n\tfunction requiredLeftEnough(argsConfig, minIndex) {\n\t\tfor(var index = minIndex; index < argsConfig.length; index++) {\n\t\t\tif(typeof(argsConfig[index]) === 'undefined' || !argsConfig[index].required)\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvar argConfigMin = 0;\n\n\tif(!Array.isArray(argsPassed))\n\t\targsPassed = Array.prototype.slice.call(argsPassed);\n\n\targsPassed.forEach(function(arg, index) {\n\t\tfor(var ctr = argConfigMin; ctr < argsConfig.length; ctr++) {\n\t\t\tif(argsConfig[ctr].required) {\n\t\t\t\tif(validArg(argsConfig[ctr], arg)) {\n\t\t\t\t\targsConfig[ctr].matched = true;\n\t\t\t\t\tmatched[argsConfig[ctr].name] = arg;\n\t\t\t\t\targConfigMin++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthrow \"missing_required\";\n\t\t\t}\n\t\t\telse if((!argsConfig[ctr].required && (requiredLeftEnough(argsConfig, ctr) || (argsConfig[ctr].level > argsConfig[ctr - 1].level && argsConfig[ctr - 1].matched))) && validArg(argsConfig[ctr], arg)) {\n\t\t\t\targsConfig[ctr].matched = true;\n\t\t\t\tmatched[argsConfig[ctr].name] = arg;\n\t\t\t\targConfigMin++;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse {\n\t\t\t\targsConfig[ctr].matched = false;\n\t\t\t\targConfigMin++;\n\t\t\t}\n\t\t}\n\t});\n\n\t// Add default options, if set\n\targsConfig.forEach(function(argConfig) {\n\t\tif(typeof matched[argConfig.name] == 'undefined' && typeof argConfig.default != 'undefined')\n\t\t\tmatched[argConfig.name] = argConfig.default;\n\t});\n\n\treturn matched;\n};\n\nmodule.exports = Utils;"]}